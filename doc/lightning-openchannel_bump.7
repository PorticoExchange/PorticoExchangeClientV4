.\" -*- mode: troff; coding: utf-8 -*-
.TH "LIGHTNING-OPENCHANNEL_BUMP" "7" "" "Core Lightning 0.12.1" ""
.SH
NAME
.LP
lightning-openchannel_bump -- Command to initiate a channel RBF
.SH
SYNOPSIS
.LP
\fBopenchannel_bump\fR \fIchannel_id\fR \fIamount\fR \fIinitalpsbt\fR [\fIfunding_feerate\fR]
.SH
DESCRIPTION
.LP
\fCopenchannel_bump\fR is a RPC command which initiates a channel
RBF (Replace-By-Fee) for the specified channel. It uses the openchannel protocol
which allows for interactive transaction construction.
.PP
\fIid\fR is the id of the channel to RBF.
.PP
\fIamount\fR is the satoshi value that we will contribute to the channel.
This value will be \fIadded\fR to the provided PSBT in the output which is
encumbered by the 2-of-2 script for this channel.
.PP
\fIinitialpsbt\fR is the funded, incomplete PSBT that specifies the UTXOs and
change output for our channel contribution. It can be updated,
see \fCopenchannel_update\fR; \fIinitialpsbt\fR must have at least one input.
Must have the Non-Witness UTXO (PSBT_IN_NON_WITNESS_UTXO) set for
every input. An error (code 309) will be returned if this requirement
is not met.
.PP
\fIfunding_feerate\fR is an optional field. Sets the feerate for the
funding transaction. Defaults to 1/64th greater than the last
feerate used for this channel.
.PP
Warning: bumping a leased channel will lose the lease.
.SH
RETURN VALUE
.LP
On success, an object is returned, containing:
.IP "\(bu" 2
\fBchannel_id\fR (hex): the channel id of the channel (always 64 characters)
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
\fBpsbt\fR (string): the (incomplete) PSBT of the RBF transaction
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
\fBcommitments_secured\fR (boolean): whether the \fIpsbt\fR is complete (always \fIfalse\fR)
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
\fBfunding_serial\fR (u64): the serial_id of the funding output in the \fIpsbt\fR
.LP
If the peer does not support \fCoption_dual_fund\fR, this command
will return an error.
.PP
If the channel is not in a state that is eligible for RBF, this command
will return an error.
.PP
On error the returned object will contain \fCcode\fR and \fCmessage\fR properties,
with \fCcode\fR being one of the following:
.IP "\(bu" 2
-32602: If the given parameters are wrong.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
-1: Catchall nonspecific error.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
300: The amount exceeded the maximum configured funding amount.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
301: The provided PSBT cannot afford the funding amount.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
305: Peer is not connected.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
309: PSBT missing required fields
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
311: Unknown channel id.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
312: Channel in an invalid state
.SH
SEE ALSO
.LP
lightning-openchannel_init(7), lightning-openchannel_update(7),
lightning-openchannel_signed(7), lightning-openchannel_abort(7),
lightning-fundchannel_start(7), lightning-fundchannel_complete(7),
lightning-fundchannel(7), lightning-fundpsbt(7), lightning-utxopsbt(7),
lightning-multifundchannel(7)
.SH
AUTHOR
.LP
@niftynei <\fIniftynei@gmail.com\fR> is mainly responsible.
.SH
RESOURCES
.LP
Main web site: \fIhttps://github.com/ElementsProject/lightning\fR
\" SHA256STAMP:a1aedc32d7cabe788a0dc00227dcab70a43eb48ab6aee8dc3eb150726cc84e64
