.\" -*- mode: troff; coding: utf-8 -*-
.TH "LIGHTNING-OPENCHANNEL_INIT" "7" "" "Core Lightning 0.12.1" ""
.SH
NAME
.LP
lightning-openchannel_init -- Command to initiate a channel to a peer
.SH
SYNOPSIS
.LP
\fBopenchannel_init\fR \fIid\fR \fIamount\fR \fIinitalpsbt\fR [\fIcommitment_feerate\fR] [\fIfunding_feerate\fR] [\fIannounce\fR] [\fIclose_to\fR] [\fIrequest_amt\fR] [\fIcompact_lease\fR]
.SH
DESCRIPTION
.LP
\fCopenchannel_init\fR is a low level RPC command which initiates a channel
open with a specified peer. It uses the openchannel protocol
which allows for interactive transaction construction.
.PP
\fIid\fR is the node id of the remote peer.
.PP
\fIamount\fR is the satoshi value that we will contribute to the channel.
This value will be \fIadded\fR to the provided PSBT in the output which is
encumbered by the 2-of-2 script for this channel.
.PP
\fIinitialpsbt\fR is the funded, incomplete PSBT that specifies the UTXOs and
change output for our channel contribution. It can be updated,
see \fCopenchannel_update\fR; \fIinitialpsbt\fR must have at least one input.
Must have the Non-Witness UTXO (PSBT_IN_NON_WITNESS_UTXO) set for
every input. An error (code 309) will be returned if this requirement
is not met.
.PP
\fIcommitment_feerate\fR is an optional field. Sets the feerate for
commitment transactions: see \fBfundchannel\fR.
.PP
\fIfunding_feerate\fR is an optional field. Sets the feerate for the
funding transaction. Defaults to 'opening' feerate.
.PP
\fIannounce\fR is an optional field. Whether or not to announce this channel.
.PP
\fIclose_to\fR is a Bitcoin address to which the channel funds should be
sent on close. Only valid if both peers have negotiated
\fCoption_upfront_shutdown_script\fR.
.PP
\fIrequest_amt\fR is an amount of liquidity you'd like to lease from the peer.
If peer supports \fCoption_will_fund\fR, indicates to them to include this
much liquidity into the channel. Must also pass in \fIcompact_lease\fR.
.PP
\fIcompact_lease\fR is a compact represenation of the peer's expected
channel lease terms. If the peer's terms don't match this set, we will
fail to open the channel.
.SH
RETURN VALUE
.LP
On success, an object is returned, containing:
.IP "\(bu" 2
\fBchannel_id\fR (hex): the channel id of the channel (always 64 characters)
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
\fBpsbt\fR (string): the (incomplete) PSBT of the funding transaction
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
\fBcommitments_secured\fR (boolean): whether the \fIpsbt\fR is complete (always \fIfalse\fR)
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
\fBfunding_serial\fR (u64): the serial_id of the funding output in the \fIpsbt\fR
.LP
If the peer does not support \fCoption_dual_fund\fR, this command
will return an error.
.PP
If you sent a \fIrequest_amt\fR and the peer supports \fCoption_will_fund\fR and is
interested in leasing you liquidity in this channel, returns their updated
channel fee max (\fIchannel\fIfee\fIproportional_basis\fR, \fIchannel\fIfee\fIbase_msat\fR),
updated rate card for the lease fee (\fIlease\fIfee\fIproportional_basis\fR,
\fIlease\fIfee\fIbase_sat\fR) and their on-chain weight \fIweight_charge\fR, which will
be added to the lease fee at a rate of \fIfunding_feerate\fR * \fIweight_charge\fR
/ 1000.
.PP
On error the returned object will contain \fCcode\fR and \fCmessage\fR properties,
with \fCcode\fR being one of the following:
.IP "\(bu" 2
-32602: If the given parameters are wrong.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
-1: Catchall nonspecific error.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
300: The amount exceeded the maximum configured funding amount.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
301: The provided PSBT cannot afford the funding amount.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
304: Still syncing with bitcoin network
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
305: Peer is not connected.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
306: Unknown peer id.
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
309: PSBT missing required fields
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
310: v2 channel open protocol not supported by peer
.if n \
.sp -1
.if t \
.sp -0.25v
.IP "\(bu" 2
312: Channel in an invalid state
.SH
SEE ALSO
.LP
lightning-openchannel_update(7), lightning-openchannel_signed(7),
lightning-openchannel_abort(7), lightning-openchannel_bump(7),
lightning-fundchannel_start(7),
lightning-fundchannel_complete(7), lightning-fundchannel(7),
lightning-fundpsbt(7), lightning-utxopsbt(7), lightning-multifundchannel(7)
.SH
AUTHOR
.LP
@niftynei <\fIniftynei@gmail.com\fR> is mainly responsible.
.SH
RESOURCES
.LP
Main web site: \fIhttps://github.com/ElementsProject/lightning\fR
\" SHA256STAMP:b7d5c37b39df6b2459bac953cf8f2cf7add1c4fed1bf137f08cd23ae5fa9c928
